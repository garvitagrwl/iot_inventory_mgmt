<!-- {% extends 'base_layout.html' %}
{% block page_title %}Components Items{% endblock %}

{% block page_content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;padding: 20px;">
  <h3 style="margin: 10px 0;">Components in {{ category_name }}</h3>
  <input type="text" id="searchInput" placeholder="Search component..." onkeyup="filterComponents()" style="width: 300px; padding: 8px;">
</div> -->


<!-- Components List -->
<!-- <div id="componentList" style="width: 95%; margin: auto;">
  {% for item in components %}
    <div class="component-item"
         data-name="{{ item.name|lower }}"
         style="display: flex; align-items: center; justify-content: space-between; padding: 10px; border: 1px solid #ccc; margin-bottom: 10px; border-radius: 8px;">

      <div style="flex: 2;"><strong>{{ item.name }}</strong></div>
      <div style="flex: 1;">Available: {{ item.quantity }}</div>
      <div style="flex: 1;">Status: {{ item.status }}</div>

      <div style="flex: 0.5;" id="control-{{ item.id }}">
        {% if item.quantity > 0 %}
          <button onclick="startQuantityControl({{ item.id }}, {{ item.quantity }})">Add</button>
        {% else %}
          <button disabled>Out of Stock</button>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div> -->

<!-- No Match Message -->
<!-- <div id="noResult" style="text-align:center; display:none; color:gray; margin-top: 20px;">
  No matching components found.
</div> -->

<!-- JS -->
<!-- <script>
function filterComponents() {
  const search = document.getElementById("searchInput").value.toLowerCase();
  const items = document.getElementsByClassName("component-item");
  let visibleCount = 0;

  for (let item of items) {
    const name = item.getAttribute("data-name");
    const show = name.includes(search);
    item.style.display = show ? "flex" : "none";
    if (show) visibleCount++;
  }

  document.getElementById("noResult").style.display = visibleCount === 0 ? "block" : "none";
}

function startQuantityControl(id, maxQty) {
  const container = document.getElementById("control-" + id);
  container.innerHTML = `
    <div style="display: flex; align-items: center; gap: 10px;">
      <button onclick="decrease(${id}, ${maxQty})">-</button>
      <input id="qty-${id}" type="number" value="1" min="1" max="${maxQty}" style="width: 40px; text-align:center;" readonly>
      <button onclick="increase(${id}, ${maxQty})">+</button>
    </div>
  `;
}

function increase(id, maxQty) {
  const input = document.getElementById("qty-" + id);
  let val = parseInt(input.value);
  if (val < maxQty) input.value = val + 1;
}

function decrease(id, maxQty) {
  const input = document.getElementById("qty-" + id);
  let val = parseInt(input.value);
  if (val > 1) {
    input.value = val - 1;
  } else {
    // Revert to Add button
    const container = document.getElementById("control-" + id);
    container.innerHTML = `<button onclick="startQuantityControl(${id}, ${maxQty})">Add</button>`;
  }
}
</script> -->
<!-- {% endblock %} -->
