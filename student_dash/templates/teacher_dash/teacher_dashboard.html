{% extends 'base_layout.html' %}

<!--css name-->
{% block css_filename %}student_dash/admin-dashboard.css{% endblock %}

<!--title  of webpage-->
{% block page_title %}welcome admin{% endblock %}

{% block page_content%}
  <div class="admin-container">
    <aside class="admin-sidebar">
      <h2>Admin Panel</h2>
      <ul>
        <li><a href="{% url 'dash:approved_requests' %}">Approved Requests</a></li>
        <li><a href="{% url 'dash:rejected_requests' %}">Rejected Requests</a></li>
        <li><a href="inventory.html">Inventory</a></li>
<!--        <li><a href="project-tracker.html">Project Tracker</a></li>-->
        <li><a href="index.html">Logout</a></li>
      </ul>
    </aside>

    <main class="admin-main">
      <header>
        <h1>Welcome, Admin</h1>
        <p>Manage all student requests and lab inventory.</p>
      </header>

      <section class="admin-cards">
        <div class="admin-card">
          <h3>Pending Form Requests</h3>
          <p>{{ requests_distinct.count }}</p>
        </div>
<!--        <div class="admin-card">-->
<!--          <h3>Low Stock Alerts</h3>-->
<!--          <p>2</p>-->
<!--        </div>-->
<!--        <div class="admin-card">-->
<!--          <h3>Active Projects</h3>-->
<!--          <p>6</p>-->
<!--        </div>-->
      </section>

      <section class="request-section">
        <h2>Validate Requests</h2>
        <table>
          <thead>
            <tr>
              <th>Student</th>
                <th>Rollno.</th>
              <th>Component</th>
              <th>Quantity</th>
              <th>Form Date</th>
              <th>Action</th>
            </tr>


          </thead>
          <tbody>
            {% for i in requests_distinct %}
              <tr>
                <!-- Student name cell with hover -->
              <td><!--      <div class="student-hover-box">-->
              {{ i.student__full_name }}
              </td>
                  <td>{{i.student__roll_number}}</td>
                <td>{{i.component__name}}</td>
                <td>{{i.quantity_issued}}</td>
                <td>{{i.form_date}}</td>
                <td> <form method="POST" action="{% url 'dash:update_status' %}">
      {% csrf_token %}
      <input type="hidden" name="roll_number" value="{{ i.student__roll_number }}">
      <input type="hidden" name="form_date" value="{{ i.form_date|date:'Y-m-d' }}">
      <input type="hidden" name="component_name" value="{{ i.component__name }}">

      <button name="action" value="approve">Approve</button>
      <button name="action" value="reject">Reject</button>
    </form></td>



              </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </main>
  </div>
{% endblock %}
